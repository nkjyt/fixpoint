# フィックスポイント　プログラミング試験問題

## プログラムの実行環境
```
Python 3.8.5
```
以下のパッケージをインストールしてください．
```
pip install netaddr
```

## 設問１(01.py)
最後までpingの応答が無かったサーバーは，故障期間の終わりを空白にしています．以下の変数にテスト用に読み込むログファイル(.csv)を指定してください．今回使用したテスト用ファイルは`log`ディレクトリに保存しています．
```python:01.py
file_name = 'log/server_observation_1.csv'
```
以下がテスト結果となります．故障がない場合には何も出力しません．
- server_observation_1.csv
```
10.20.30.1/16 : 20201019133324 ~ 20201020133335
10.20.30.2/16 : 20201019133325 ~
192.168.1.2/24 : 20201019133135 ~ 20201019133235
```
- server_observation_2.csv
```
10.20.30.1/16 : 20201019133324 ~
10.20.30.2/16 : 20201020133335 ~ 20201020133425
192.168.1.1/24 : 20201020133434 ~
192.168.1.2/24 : 20201019133135 ~ 20201020133435
```
<br>

## 設問２(02.py)
`01.py`にパラメータの`N`を追加し，タイムアウトの回数が`N`を超えた場合に故障として出力するようなプログラムになっています．以下にテスト結果を示します．
- server_observation_2.csv
```
10.20.30.1/16 : 20201019133324 ~
```
- server_observation_4.csv
```
10.20.30.1/16 : 20201019133224 ~ 20201020133424
```
<br>

## 設問３(03.py)
パラメータとして`m`，`t`を追加し，`overload`という関数名で実装した．直近でタイムアウトしていた場合にも出力されるようにしている．以下はパラメータをそれぞれ`m=3`，`t=512`と設定した時のテスト結果である．
- server_observation_3.csv
```
10.20.30.1/16 : 20201019133324 ~ 20201020133424
```
- server_observation_6.csv
```
10.20.30.1/16 : 20201019133324 ~ 20201020133424
10.20.30.2/16 : 20201019133325 ~ 20201020133425
192.168.1.1/24は直近3回のアクセスでタイムアウトしました．
192.168.1.2/24 : 20201019133235 ~ 20201020133445
```

<br>

## 設問４(04.py)
`02.py`をベースに実装しています．IPアドレスからサブネットマスクを計算するために`netaddr`というパッケージを使用．まず，ログファイルを読み込み，IPアドレスをサブネットのグループで分け，辞書型で保存しておく．次に，サブネットごと→サーバーごとに`02.py`で実装した故障判定の関数を用いて，故障期間を得る．得られた結果から，`check_subnet_error`関数を用いて，故障期間が被っているか，何台故障しているかを判定する．条件を満たせば，故障しているサブネットと，故障期間を出力する.なお，故障しているサブネットがない場合には，何も出力されない．
以下に`N=2`としたときのテスト結果を示す．
- server_observation_5.py
```
192.168.1.0: 2020-10-19 13:32:34 ~ 2020-10-20 13:34:35
```
- server_observation_7.py
```
10.20.0.0: 2020-10-19 13:33:25 ~ 2020-10-20 13:34:35
192.168.1.0: 2020-10-19 13:32:34 ~ 2020-10-20 13:34:35
```